backend:
  name: github
  repo: aquada/barechart
  branch: main

# ---------------------------------------------------------------------------
# Netlify / Sveltia CMS config notes
# - `media_folder`: where uploaded files are saved in the repo (can be relative
#   to the site root or a collection folder). We prefer saving under `content/`
#   so images become Hugo Page Resources and are versioned in git.
# - `public_folder`: the path used in generated pages to reference uploaded
#   media (how the site will serve them). It is typically a public-facing
#   path like `/uploads` or `/trades/<bundle>`.
# - Collections: `folder` is where CMS writes entries; `slug` controls filename
#   when creating single files; `path` can contain slashes and a filename and
#   is required to create nested page-bundle directories (e.g. `bundle/index`).
# - Token notes: not all CMS builds support `{{fields.*}}` tokens in `path` or
#   `media_folder`. If you see validation errors in the admin UI, remove tokens
#   or clear the browser cache and try again.
# - Recommended workflow for page bundles:
#   1. Fill Title/Slug (or set the fields used in `path`) before uploading media.
#   2. Upload images (they will be saved next to `index.md` in the bundle).
#   3. Save the entry. If images land in unexpected folders, hard-refresh the
#      admin UI and retry the create flow (token resolution/order matters).
# ---------------------------------------------------------------------------

media_folder: "static/uploads"
public_folder: "/uploads"

collections:

  # ============================
  # BLOG POSTS
  # ============================
  - name: "posts"
    label: "Blog Posts"
    folder: "content/posts"
    create: true
    slug: "{{slug}}"
    fields:
      - { label: "Title", name: "title", widget: "string" }
      - { label: "Publish Date", name: "date", widget: "datetime", default: "{{now}}" }
      - { label: "Thumbnail", name: "thumbnail", widget: "image", required: false }
      - { label: "Tags", name: "tags", widget: "list", required: false }

  # ============================
  # TRADES (use Page Bundles for images)
  # Saves uploaded media into the entry folder so Hugo Page Resources work
  # ============================
  - name: "trades"
    label: "Trades"
    folder: "content/trades"
    create: true
    # Create a page bundle by writing the file as `.../<bundle>/index`.
    # Include date + time to make bundles unique: year-month-day-hour-minute-second
    # (instrument removed to avoid CMS/token issues).
    # Use `index` (no extension) â€” some CMSes append `.md` automatically.
    path: "{{year}}-{{month}}-{{day}}-{{hour}}-{{minute}}-{{second}}-{{slug}}/index"
    # Save uploaded media inside the entry bundle directory (explicit path).
    media_folder: "content/trades/{{year}}-{{month}}-{{day}}-{{hour}}-{{minute}}-{{second}}-{{slug}}"
    # Public path for the uploaded files on the generated site
    public_folder: "/trades/{{year}}-{{month}}-{{day}}-{{hour}}-{{minute}}-{{second}}-{{slug}}"
    # NOTE: Removed the `instrument` field to avoid CMS path/token issues.
    fields:
      - { label: "Trader", name: "trader", widget: "string" }
      - { label: "Date", name: "date", widget: "datetime", default: "{{now}}" }
      - { label: "Time", name: "time", widget: "string" }

      - { label: "Setup", name: "setup", widget: "text" }
      - { label: "Confluence Entry & SL", name: "confluence", widget: "text" }
      - { label: "Target", name: "target", widget: "text" }

      - { label: "Notes", name: "notes", widget: "markdown", required: false }

      - { label: "Featured Image", name: "featured_image", widget: "image", required: false }
      - { label: "Image", name: "image", widget: "image", required: false }

      - { label: "Tags", name: "tags", widget: "list", required: false }
      - { label: "Body", name: "body", widget: "markdown" }

  # ============================
  # PERSONAL TRADING LOG (renamed)
  # ============================
  - name: "personal_log"
    label: "Personal Trading Log"
    folder: "content/personal-log"
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}"
    fields:
      - { label: "Trader", name: "trader", widget: "string", default: "Dan" }
      - { label: "Date", name: "date", widget: "datetime", default: "{{now}}" }
      - { label: "Time", name: "time", widget: "string", default: "09:00" }

      - label: "Instrument"
        name: "instrument"
        widget: "select"
        options:
          - DAX
          - DOW
          - NASDAQ
          - USDJPY
          - EURUSD
          - GBPUSD
          - GOLD

      - { label: "Setup", name: "setup", widget: "text" }
      - { label: "Confluence Entry & SL", name: "confluence", widget: "text" }
      - { label: "Target", name: "target", widget: "text" }
      - { label: "Notes", name: "notes", widget: "markdown", required: false }

      - label: "Rules Followed?"
        name: "rules_followed"
        widget: "select"
        options: ["yes", "no"]
        default: "yes"

      - { label: "Thumbnail", name: "thumbnail", widget: "image", required: false }
      - { label: "Image", name: "image", widget: "image", required: false }

      - { label: "Tags", name: "tags", widget: "list", required: false }

  # ============================
  # TEAMWORK TRADES (your screenshot table)
  # ============================
  - name: "teamwork"
    label: "Teamwork Trades"
    folder: "content/teamwork"
    create: true
    slug: "{{year}}-{{month}}-{{day}}-team-{{slug}}"
    fields:
      - { label: "Trader", name: "trader", widget: "string" }
      - { label: "Date", name: "date", widget: "datetime", default: "{{now}}" }
      - { label: "Time", name: "time", widget: "string" }

      - label: "Instrument"
        name: "instrument"
        widget: "select"
        options:
          - DAX
          - DOW
          - NASDAQ
          - USDJPY
          - EURUSD
          - GBPUSD
          - GOLD

      - { label: "Setup", name: "setup", widget: "text" }
      - { label: "Confluence for Entry & SL", name: "confluence_entry", widget: "text" }
      - { label: "Target & Confluence", name: "confluence_target", widget: "text" }

      - { label: "R:R Target", name: "rr_target", widget: "string" }
      - { label: "R Gain", name: "r_gain", widget: "string" }

      - { label: "Reason for Close", name: "reason_close", widget: "text" }

      - label: "All Rules Followed?"
        name: "rules_followed"
        widget: "select"
        options: ["yes", "no"]

      - { label: "Notes", name: "notes", widget: "markdown", required: false }

      - label: "Good or Bad"
        name: "good_or_bad"
        widget: "select"
        options:
          - Good
          - Bad
          - Neutral

      - { label: "Screenshot", name: "image", widget: "image", required: false }

      - { label: "Tags", name: "tags", widget: "list", required: false }
